#!/bin/bash
#SBATCH --account=OD-232538
#SBATCH --time=4:00:00
#SBATCH --mem=5g
#SBATCH --cpus-per-task=1

module load python

dates=(
    "2018-12-01 T16:00 2018-12-02 T16:00"
    "2018-12-07 T16:00 2018-12-08 T16:00"
    "2018-12-14 T16:00 2018-12-15 T16:00"
    "2018-12-21 T16:00 2018-12-22 T16:00"
    "2018-12-28 T16:00 2018-12-29 T16:00"
    "2019-01-01 T16:00 2019-01-02 T16:00"
    "2019-01-07 T16:00 2019-01-08 T16:00"
    "2019-01-14 T16:00 2019-01-15 T16:00"
    "2019-01-21 T16:00 2019-01-22 T16:00"
    "2019-01-28 T16:00 2019-01-29 T16:00"
    "2019-12-01 T16:00 2019-12-02 T16:00"
    "2019-12-07 T16:00 2019-12-08 T16:00"
    "2019-12-14 T16:00 2019-12-15 T16:00"
    "2019-12-21 T16:00 2019-12-22 T16:00"
    "2019-12-28 T16:00 2019-12-29 T16:00"
    "2020-01-01 T16:00 2020-01-02 T16:00"
    "2020-01-07 T16:00 2020-01-08 T16:00"
    "2020-01-14 T16:00 2020-01-15 T16:00"
    "2020-01-21 T16:00 2020-01-22 T16:00"
    "2020-01-28 T16:00 2020-01-29 T16:00"
    "2020-12-01 T16:00 2020-12-02 T16:00"
    "2020-12-07 T16:00 2020-12-08 T16:00"
    "2020-12-14 T16:00 2020-12-15 T16:00"
    "2020-12-21 T16:00 2020-12-22 T16:00"
    "2020-12-28 T16:00 2020-12-29 T16:00"
    "2021-01-01 T16:00 2021-01-02 T16:00"
    "2021-01-07 T16:00 2021-01-08 T16:00"
    "2021-01-14 T16:00 2021-01-15 T16:00"
    "2021-01-21 T16:00 2021-01-22 T16:00"
    "2021-01-28 T16:00 2021-01-29 T16:00"
    "2021-12-01 T16:00 2021-12-02 T16:00"
    "2021-12-07 T16:00 2021-12-08 T16:00"
    "2021-12-14 T16:00 2021-12-15 T16:00"
    "2021-12-21 T16:00 2021-12-22 T16:00"
    "2021-12-28 T16:00 2021-12-29 T16:00"
    "2022-01-01 T16:00 2022-01-02 T16:00"
    "2022-01-07 T16:00 2022-01-08 T16:00"
    "2022-01-14 T16:00 2022-01-15 T16:00"
    "2022-01-21 T16:00 2022-01-22 T16:00"
    "2022-01-28 T16:00 2022-01-29 T16:00"
    "2022-12-01 T16:00 2022-12-02 T16:00"
    "2022-12-07 T16:00 2022-12-08 T16:00"
    "2022-12-14 T16:00 2022-12-15 T16:00"
    "2022-12-21 T16:00 2022-12-22 T16:00"
    "2022-12-28 T16:00 2022-12-29 T16:00"
    "2023-01-01 T16:00 2023-01-02 T16:00"
    "2023-01-07 T16:00 2023-01-08 T16:00"
    "2023-01-14 T16:00 2023-01-15 T16:00"
    "2023-01-21 T16:00 2023-01-22 T16:00"
    "2023-01-28 T16:00 2023-01-29 T16:00"
    

)
num_particles_per_day=1000

for i in ${!dates[@]}; do
    # Create a job script for this date
    echo "#!/bin/bash
#SBATCH --account=OD-232538
#SBATCH --time=4:00:00
#SBATCH --mem=5g
#SBATCH --cpus-per-task=1
#SBATCH --array=0-3805  # 3806 jobs

module load python

(( run = SLURM_ARRAY_TASK_ID ))

python OceanParcels_GBR1_index_search_sea_surface_CoTs_no_wind_drift_Sev.py \
    \$run ${dates[i]} $num_particles_per_day" > job_Sev_$i.sh

done
